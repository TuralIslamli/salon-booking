(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2711:(e,t,n)=>{Promise.resolve().then(n.bind(n,8140))},8140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var s=n(5155),r=n(2115),a=n(2398),o=n(6432),l=n(9139),i=n.n(l);function c(e){return e.replace(/\D/g,"")}var u=n(5041),p=n(8363);let d=function(e){let{setStep:t,phone:n,setPhone:r}=e,{mutate:l,isPending:d}=(0,u.n)({mutationFn:async()=>(0,p.U5)({phone:c(n)}),onSuccess:()=>{t("otp")},onError:e=>{console.error("Error during login:",e)}}),h=async()=>{l()};return(0,s.jsxs)("div",{className:i().phoneInput,children:[(0,s.jsx)("label",{htmlFor:"phone",className:i().label,children:"Mobil n\xf6mrə"}),(0,s.jsx)(o.N,{id:"client_phone",mask:"+999 99 999-99-99",placeholder:"+994 99 999-99-99",value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&12===c(n).length&&h()},className:i().input}),(0,s.jsx)(a.$,{label:"Kod g\xf6ndər",onClick:h,className:i().button,disabled:12!==c(n).length,loading:d})]})};var h=n(896),g=n(5695),_=n(8817);let m=function(e){let{setStep:t,phone:n}=e,[o,l]=(0,r.useState)(""),d=(0,g.useRouter)(),m=(0,r.useRef)(null),{mutate:v,isPending:y}=(0,u.n)({mutationKey:["otp"],mutationFn:async()=>(0,p.i6)({phone:c(n),code:o}),onSuccess:e=>{localStorage.setItem("customerToken",e.data.token.access_token),d.push("/")},onError:e=>{var t,n,s;null==(s=m.current)||s.show({severity:"error",summary:"Error",detail:null==e||null==(n=e.response)||null==(t=n.data)?void 0:t.message,life:3e3}),console.error("Error during otp:",e)}}),b=async()=>{v()};return(0,s.jsxs)("div",{className:i().otpInput,onKeyDown:e=>{"Enter"===e.key&&4===o.length&&b()},children:[(0,s.jsx)(_.y,{ref:m}),(0,s.jsx)(h.o,{integerOnly:!0,value:o,onChange:e=>l(e.value),length:4,style:{gap:10}}),(0,s.jsx)("div",{children:(0,s.jsx)(a.$,{label:"Təsdiqlə",disabled:o.length<4,onClick:b,className:i().button,loading:y})})]})};function v(){let[e,t]=(0,r.useState)("phone"),[n,a]=(0,r.useState)("");return(0,s.jsx)("div",{className:i().login,children:(0,s.jsxs)("div",{className:i().card,children:[(0,s.jsx)("h2",{children:"Daxil ol"}),"phone"==e?(0,s.jsx)(d,{setStep:t,phone:n,setPhone:a}):(0,s.jsx)(m,{setStep:t,phone:n})]})})}},8363:(e,t,n)=>{"use strict";n.d(t,{sH:()=>d,Tl:()=>u,dJ:()=>i,ps:()=>p,ju:()=>c,U5:()=>o,i6:()=>l});var s=n(3464),r=n(5695);let a=s.A.create({baseURL:"https://dev-api.nargizestetik.az/customer-api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("customerToken");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>null==e?void 0:e.data,async e=>{var t,n;return(e.response&&(null==(t=e.response)?void 0:t.data.message)==="USER_NOT_AUTHORIZED"?(localStorage.clear(),(0,r.redirect)("/login")):e.response&&(null==(n=e.response)?void 0:n.data.message)||e.message,e&&e.response)?Promise.reject(e):Promise.reject()});let o=e=>a.post("auth/otp/request",e),l=e=>a.post("auth/otp/verify",e),i=()=>a.get("/reservations"),c=async()=>{let{data:e}=await a.get("/service-types/input-search");return e},u=async e=>{let{data:t}=await a.get("/reservation-times/input-search?date=".concat(e));return t},p=async e=>{let{data:t}=await a.get("/reservations/users/input-search?date_time=".concat(e));return t},d=async e=>a.post("/reservations",e)},9139:e=>{e.exports={login:"login_login__3rAwP",float:"login_float___bzv4",card:"login_card__HHlBu",cardEntry:"login_cardEntry__98uj8",label:"login_label___4VjD",phoneInput:"login_phoneInput__rVLLX",otpInput:"login_otpInput__PClKn",slideUp:"login_slideUp__dkHRc",button:"login_button___c0oi",backButton:"login_backButton__EcrDx"}}},e=>{var t=t=>e(e.s=t);e.O(0,[280,144,737,673,441,684,358],()=>t(2711)),_N_E=e.O()}]);