(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2711:(e,t,s)=>{Promise.resolve().then(s.bind(s,8140))},8140:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var n=s(5155),r=s(2115),a=s(2398),o=s(6432),l=s(9139),i=s.n(l);function u(e){return e.replace(/\D/g,"")}var c=s(5041),p=s(8363);let d=function(e){let{setStep:t,phone:s,setPhone:r}=e,{mutate:l}=(0,c.n)({mutationFn:async()=>(0,p.U5)({phone:u(s)}),onSuccess:()=>{t("otp")},onError:e=>{console.error("Error during login:",e)}}),d=async()=>{l()};return(0,n.jsxs)("div",{className:i().phoneInput,children:[(0,n.jsx)("label",{htmlFor:"phone",className:i().label,children:"Mobil n\xf6mrə"}),(0,n.jsx)(o.N,{id:"client_phone",mask:"+999 99 999-99-99",placeholder:"+994 99 999-99-99",value:s,onChange:e=>r(e.target.value),className:i().input}),(0,n.jsx)(a.$,{label:"Kod g\xf6ndər",onClick:d,className:i().button,disabled:12!==u(s).length})]})};var h=s(896),g=s(5695),m=s(8817);let v=function(e){let{setStep:t,phone:s}=e,[o,l]=(0,r.useState)(""),d=(0,g.useRouter)(),v=(0,r.useRef)(null),{mutate:_}=(0,c.n)({mutationKey:["otp"],mutationFn:async()=>(0,p.i6)({phone:u(s),code:o}),onSuccess:e=>{localStorage.setItem("customerToken",e.data.token.access_token),d.push("/")},onError:e=>{var t,s,n;null==(n=v.current)||n.show({severity:"error",summary:"Error",detail:null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message,life:3e3}),console.error("Error during otp:",e)}}),j=async()=>{_()};return(0,n.jsxs)("div",{className:i().otpInput,children:[(0,n.jsx)(m.y,{ref:v}),(0,n.jsx)(h.o,{integerOnly:!0,value:o,onChange:e=>l(e.value),length:4,style:{gap:10}}),(0,n.jsx)("div",{children:(0,n.jsx)(a.$,{label:"Təsdiqlə",disabled:o.length<4,onClick:j})})]})};function _(){let[e,t]=(0,r.useState)("phone"),[s,a]=(0,r.useState)("");return(0,n.jsx)("div",{className:i().login,children:(0,n.jsxs)("div",{className:i().card,children:[(0,n.jsx)("h2",{children:"Daxil ol"}),"phone"==e?(0,n.jsx)(d,{setStep:t,phone:s,setPhone:a}):(0,n.jsx)(v,{setStep:t,phone:s})]})})}},8363:(e,t,s)=>{"use strict";s.d(t,{sH:()=>d,Tl:()=>c,dJ:()=>i,ps:()=>p,ju:()=>u,U5:()=>o,i6:()=>l});var n=s(3464),r=s(5695);let a=n.A.create({baseURL:"https://dev-api.nargizestetik.az/customer-api"});a.interceptors.request.use(e=>{let t=localStorage.getItem("customerToken");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),a.interceptors.response.use(e=>null==e?void 0:e.data,async e=>{var t,s;return(e.response&&(null==(t=e.response)?void 0:t.data.message)==="USER_NOT_AUTHORIZED"?(localStorage.clear(),(0,r.redirect)("/login")):e.response&&(null==(s=e.response)?void 0:s.data.message)||e.message,e&&e.response)?Promise.reject(e):Promise.reject()});let o=e=>a.post("auth/otp/request",e),l=e=>a.post("auth/otp/verify",e),i=()=>a.get("/reservations"),u=async()=>{let{data:e}=await a.get("/service-types/input-search");return e},c=async e=>{let{data:t}=await a.get("/reservation-times/input-search?date=".concat(e));return t},p=async e=>{let{data:t}=await a.get("/reservations/users/input-search?date_time=".concat(e));return t},d=async e=>a.post("/reservations",e)},9139:e=>{e.exports={login:"login_login__3rAwP",card:"login_card__HHlBu",label:"login_label___4VjD",phoneInput:"login_phoneInput__rVLLX",otpInput:"login_otpInput__PClKn"}}},e=>{var t=t=>e(e.s=t);e.O(0,[280,144,737,673,441,684,358],()=>t(2711)),_N_E=e.O()}]);