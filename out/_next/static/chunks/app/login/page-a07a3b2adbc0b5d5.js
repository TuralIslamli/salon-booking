(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2711:(e,t,n)=>{Promise.resolve().then(n.bind(n,8140))},8140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var s=n(5155),o=n(2115),r=n(5695),a=n(6766),l=n(2398),i=n(6432),c=n(9139),u=n.n(c);function p(e){return e.replace(/\D/g,"")}var d=n(5041),g=n(8363);let _=function(e){let{setStep:t,phone:n,setPhone:o}=e,{mutate:r,isPending:a}=(0,d.n)({mutationFn:async()=>(0,g.U5)({phone:p(n)}),onSuccess:()=>{t("otp")},onError:e=>{console.error("Error during login:",e)}}),c=async()=>{r()};return(0,s.jsxs)("div",{className:u().phoneInput,children:[(0,s.jsx)("label",{htmlFor:"phone",className:u().label,children:"Mobil n\xf6mrə"}),(0,s.jsx)(i.N,{id:"client_phone",mask:"+999 99 999-99-99",placeholder:"+994 99 999-99-99",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&12===p(n).length&&c()},className:u().input}),(0,s.jsx)(l.$,{label:"Kod g\xf6ndər",onClick:c,className:u().button,disabled:12!==p(n).length,loading:a})]})};var h=n(896),m=n(8817);let v=function(e){let{setStep:t,phone:n}=e,[a,i]=(0,o.useState)(""),c=(0,r.useRouter)(),_=(0,o.useRef)(null),{mutate:v,isPending:y}=(0,d.n)({mutationKey:["otp"],mutationFn:async()=>(0,g.i6)({phone:p(n),code:a}),onSuccess:e=>{localStorage.setItem("customerToken",e.data.token.access_token),c.push("/")},onError:e=>{var t,n,s;null==(s=_.current)||s.show({severity:"error",summary:"Error",detail:null==e||null==(n=e.response)||null==(t=n.data)?void 0:t.message,life:3e3}),console.error("Error during otp:",e)}}),b=async()=>{v()};return(0,s.jsxs)("div",{className:u().otpInput,onKeyDown:e=>{"Enter"===e.key&&4===a.length&&b()},children:[(0,s.jsx)(m.y,{ref:_}),(0,s.jsx)(h.o,{integerOnly:!0,value:a,onChange:e=>i(e.value),length:4,style:{gap:10}}),(0,s.jsx)("div",{children:(0,s.jsx)(l.$,{label:"Təsdiqlə",disabled:a.length<4,onClick:b,className:u().button,loading:y})})]})};function y(){let e=(0,r.useRouter)(),[t,n]=(0,o.useState)("phone"),[l,i]=(0,o.useState)("");return(0,o.useEffect)(()=>{localStorage.getItem("customerToken")&&e.push("/")},[e]),(0,s.jsx)("div",{className:u().login,children:(0,s.jsxs)("div",{className:u().card,children:[(0,s.jsx)("div",{className:u().logoWrapper,children:(0,s.jsx)(a.default,{src:"/logo15.svg",alt:"Salon Logo",width:180,height:120,className:u().logo,priority:!0})}),(0,s.jsxs)("div",{className:u().headerSection,children:[(0,s.jsx)("h2",{children:"Daxil ol"}),(0,s.jsx)("p",{className:u().subtitle,children:"Rezervasiya sisteminə xoş gəlmisiniz"})]}),"phone"==t?(0,s.jsx)(_,{setStep:n,phone:l,setPhone:i}):(0,s.jsx)(v,{setStep:n,phone:l})]})})}},8363:(e,t,n)=>{"use strict";n.d(t,{sH:()=>d,Tl:()=>u,dJ:()=>i,ps:()=>p,ju:()=>c,U5:()=>a,i6:()=>l});var s=n(3464),o=n(5695);let r=s.A.create({baseURL:"https://api.nargizestetik.az/customer-api"});r.interceptors.request.use(e=>{let t=localStorage.getItem("customerToken");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>null==e?void 0:e.data,async e=>{var t,n;return(e.response&&(null==(t=e.response)?void 0:t.data.message)==="USER_NOT_AUTHORIZED"?(localStorage.clear(),(0,o.redirect)("/login")):e.response&&(null==(n=e.response)?void 0:n.data.message)||e.message,e&&e.response)?Promise.reject(e):Promise.reject()});let a=e=>r.post("auth/otp/request",e),l=e=>r.post("auth/otp/verify",e),i=()=>r.get("/reservations"),c=async()=>{let{data:e}=await r.get("/service-types/input-search");return e},u=async e=>{let{data:t}=await r.get("/reservation-times/input-search?date=".concat(e));return t},p=async e=>{let{data:t}=await r.get("/reservations/users/input-search?date_time=".concat(e));return t},d=async e=>r.post("/reservations",e)},9139:e=>{e.exports={login:"login_login__3rAwP",float:"login_float___bzv4",card:"login_card__HHlBu",cardEntry:"login_cardEntry__98uj8",logoWrapper:"login_logoWrapper__p8cki",logoFadeIn:"login_logoFadeIn__sOloG",logo:"login_logo__Afq4L",headerSection:"login_headerSection__ThbLM",subtitle:"login_subtitle__cgBL6",label:"login_label___4VjD",phoneInput:"login_phoneInput__rVLLX",otpInput:"login_otpInput__PClKn",slideUp:"login_slideUp__dkHRc",button:"login_button___c0oi",backButton:"login_backButton__EcrDx"}}},e=>{var t=t=>e(e.s=t);e.O(0,[280,144,746,673,441,684,358],()=>t(2711)),_N_E=e.O()}]);