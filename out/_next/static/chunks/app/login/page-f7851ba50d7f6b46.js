(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2605:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>N});var r=t(5155),u=t(2115),a=t(2398),l=t(4396),o=t(7340),i=t(6277),c=t(6080),s=t(7740);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}var p=s.x.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,invalid:!1,variant:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0},css:{classes:{root:function(e){var n=e.props,t=e.context;return(0,c.xW)("p-inputmask",{"p-filled":n.filled,"p-invalid":n.invalid,"p-variant-filled":n.variant?"filled"===n.variant:t&&"filled"===t.inputStyle})}}}}),d=u.memo(u.forwardRef(function(e,n){var t=u.useContext(l.UM),r=p.getProps(e,t),a=u.useRef(null),s=u.useRef(null),d=u.useRef(0),v=u.useRef([]),g=u.useRef([]),m=u.useRef(0),b=u.useRef(null),h=u.useRef(!1),y=u.useRef(null),O=u.useRef(null),k=u.useRef(null),x=u.useRef(null),j=u.useRef(null),S=u.useRef(!1),E={props:r},C=p.setMetaData(E).cx,w=function(e,n){var t,r,u,l=a.current;return l&&l.offsetParent&&l===document.activeElement?("number"==typeof e?(r=e,u="number"==typeof n?n:r,l.setSelectionRange?l.setSelectionRange(r,u):l.createTextRange&&((t=l.createTextRange()).collapse(!0),t.moveEnd("character",u),t.moveStart("character",r),t.select())):l.setSelectionRange?(r=l.selectionStart,u=l.selectionEnd):document.selection&&document.selection.createRange&&(u=(r=0-(t=document.selection.createRange()).duplicate().moveStart("character",-1e5))+t.text.length),{begin:r,end:u}):null},_=function(){for(var e=s.current;e<=d.current;e++)if(v.current[e]&&g.current[e]===D(e))return!1;return!0},D=u.useCallback(function(e){return e<r.slotChar.length?r.slotChar.charAt(e):r.slotChar.charAt(0)},[r.slotChar]),P=function(){return r.unmask?V():a.current&&a.current.value},N=function(e){for(;++e<m.current&&!v.current[e];);return e},R=function(e){for(;--e>=0&&!v.current[e];);return e},I=function(e,n){var t,r;if(!(e<0)){for(t=e,r=N(n);t<m.current;t++)if(v.current[t]){if(r<m.current&&v.current[t].test(g.current[r]))g.current[t]=g.current[r],g.current[r]=D(r);else break;r=N(r)}U(),w(Math.max(s.current,e))}},A=function(e){var n,t,r,u;for(n=e,t=D(e);n<m.current;n++)if(v.current[n])if(r=N(n),u=g.current[n],g.current[n]=t,r<m.current&&v.current[r].test(u))t=u;else break},T=function(e){var n=a.current.value,t=w();if(t){if(b.current.length&&b.current.length>n.length){for(B(!0);t.begin>0&&!v.current[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<s.current&&!v.current[t.begin];)t.begin++;w(t.begin,t.begin)}else{for(B(!0);t.begin<m.current&&!v.current[t.begin];)t.begin++;w(t.begin,t.begin)}r.onComplete&&_()&&r.onComplete({originalEvent:e,value:P()}),L(e)}},F=function(e){if(h.current=!1,B(),L(e),z(),r.onBlur&&r.onBlur(e),a.current.value!==y.current){var n=document.createEvent("HTMLEvents");n.initEvent("change",!0,!1),a.current.dispatchEvent(n)}},M=function(e,n){var t;for(t=e;t<n&&t<m.current;t++)v.current[t]&&(g.current[t]=D(t))},U=function(){a.current&&(a.current.value=g.current.join(""))},B=function(e){O.current=!0;var n,t,u,l=a.current&&a.current.value,o=-1;for(n=0,u=0;n<m.current;n++)if(v.current[n]){for(g.current[n]=D(n);u++<l.length;)if(t=l.charAt(u-1),v.current[n].test(t)){g.current[n]=t,o=n;break}if(u>l.length){M(n+1,m.current);break}}else g.current[n]===l.charAt(u)&&u++,n<k.current&&(o=n);return e?U():o+1<k.current?r.autoClear||g.current.join("")===x.current?(a.current&&a.current.value&&(a.current.value=""),M(0,m.current)):U():(U(),a.current&&(a.current.value=a.current.value.substring(0,o+1))),k.current?n:s.current},K=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!r.readOnly&&(n||w(B(!0)),L(e),r.onComplete&&_()&&r.onComplete({originalEvent:e,value:P()}))},V=u.useCallback(function(){for(var e=[],n=0;n<g.current.length;n++){var t=g.current[n];v.current[n]&&t!==D(n)&&e.push(t)}return e.join("")},[D]),L=function(e){if(r.onChange){var n=r.unmask?V():e&&e.target.value;r.onChange({originalEvent:e,value:x.current!==n?n:"",stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:r.name,id:r.id,value:x.current!==n?n:""}})}},z=function(){a.current&&a.current.value&&a.current.value.length>0?c.DV.addClass(a.current,"p-filled"):c.DV.removeClass(a.current,"p-filled")},q=function(e){var n;return a.current&&(c.BF.isEmpty(r.value)?a.current.value="":(a.current.value=r.value,n=B(e),setTimeout(function(){if(a.current)return U(),B(e)},10)),y.current=a.current.value),z(),n},H=u.useCallback(function(){return r.unmask?r.value!==V():x.current!==a.current.value&&a.current.value!==r.value},[r.unmask,r.value,V]),Y=function(){if(r.mask){v.current=[],k.current=r.mask.length,m.current=r.mask.length,s.current=null;var e={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};S.current=c.DV.isChrome()&&c.DV.isAndroid();for(var n=r.mask.split(""),t=0;t<n.length;t++){var u=n[t];"?"===u?(m.current--,k.current=t):e[u]?(v.current.push(new RegExp(e[u])),null===s.current&&(s.current=v.current.length-1),t<k.current&&(d.current=v.current.length-1)):v.current.push(null)}g.current=[];for(var a=0;a<n.length;a++){var l=n[a];"?"!==l&&(e[l]?g.current.push(D(a)):g.current.push(l))}x.current=g.current.join("")}};u.useImperativeHandle(n,function(){return{props:r,focus:function(){return c.DV.focus(a.current)},getElement:function(){return a.current}}}),u.useEffect(function(){c.BF.combinedRefs(a,n)},[a,n]),(0,o.uU)(function(){Y(),q()}),(0,o.w5)(function(){Y(),w(q(!0)),r.unmask&&L()},[r.mask]),(0,o.w5)(function(){H()&&q()},[H]),(0,o.w5)(function(){z()},[r.disabled]);var $=p.getOtherProps(r),Z=(0,c.xW)(r.className,C("root",{context:t}));return u.createElement(i.S,f({ref:a,autoFocus:r.autoFocus,id:r.id,type:r.type,name:r.name,style:r.style,className:Z},$,{placeholder:r.placeholder,size:r.size,maxLength:r.maxLength,tabIndex:r.tabIndex,disabled:r.disabled,invalid:r.invalid,readOnly:r.readOnly,onFocus:function(e){var n;!r.readOnly&&(h.current=!0,clearTimeout(j.current),a.current?y.current=a.current.value:y.current="",n=B()||0,j.current=setTimeout(function(){a.current===document.activeElement&&(U(),n===r.mask.replace("?","").length?w(0,n):w(n),z())},100),r.onFocus&&r.onFocus(e))},onBlur:F,onKeyDown:function(e){if(!r.readOnly){var n,t,u,l=e.which||e.keyCode;if(b.current=a.current.value,8===l||46===l||c.DV.isIOS()&&127===l){if(!(n=w()))return;t=n.begin,(u=n.end)-t==0&&(t=46!==l?R(t):u=N(t-1),u=46===l?N(u):u),M(t,u),I(t,u-1),L(e),e.preventDefault()}else 13===l?(F(e),L(e)):27===l&&(a.current.value=y.current,w(0,B()),L(e),e.preventDefault())}},onKeyPress:function(e){if(!r.readOnly){var n,t,u,a,l=w();if(l){var o=e.which||e.keyCode;if(e.ctrlKey||e.altKey||e.metaKey||o<32)return;o&&13!==o&&(l.end-l.begin!=0&&(M(l.begin,l.end),I(l.begin,l.end-1)),(n=N(l.begin-1))<m.current&&(t=String.fromCharCode(o),v.current[n].test(t)&&(A(n),g.current[n]=t,U(),u=N(n),c.DV.isAndroid()?setTimeout(function(){w(u)},0):w(u),l.begin<=d.current&&(a=_()))),e.preventDefault()),L(e),r.onComplete&&a&&r.onComplete({originalEvent:e,value:P()})}}},onInput:function(e){S.current?T(e):K(e)},onPaste:function(e){return K(e,!0)},required:r.required,tooltip:r.tooltip,tooltipOptions:r.tooltipOptions,pt:r.pt,unstyled:r.unstyled,__parentMetadata:{parent:E}}))}));d.displayName="InputMask";var v=t(9139),g=t.n(v);function m(e){return e.replace(/\D/g,"")}var b=t(5041),h=t(8363);let y=function(e){let{setStep:n,phone:t,setPhone:u}=e,{mutate:l}=(0,b.n)({mutationFn:async()=>(0,h.U5)({phone:m(t)}),onSuccess:()=>{n("otp")},onError:e=>{console.error("Error during login:",e)}}),o=async()=>{l()};return(0,r.jsxs)("div",{className:g().phoneInput,children:[(0,r.jsx)("label",{htmlFor:"phone",className:g().label,children:"Mobil n\xf6mrə"}),(0,r.jsx)(d,{id:"client_phone",mask:"+999 99 999-99-99",placeholder:"+994 99 999-99-99",value:t,onChange:e=>u(e.target.value),className:g().input}),(0,r.jsx)(a.$,{label:"Kod g\xf6ndər",onClick:o,className:g().button,disabled:12!==m(t).length})]})};function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(null,arguments)}function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function x(e,n){if(e){if("string"==typeof e)return k(e,n);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,n):void 0}}function j(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=s.x.extend({defaultProps:{__TYPE:"InputOtp",__parentMetadata:null,className:null,modelValue:!1,invalid:!1,disabled:!1,readOnly:!1,variant:null,tabIndex:null,length:4,mask:!1,integerOnly:!1},css:{classes:{root:"p-inputotp p-component",input:"p-inputotp-input"}}});function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){!function(e,n,t){var r;(r=function(e,n){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=S(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==S(r)?r:r+"")in e)?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var _=u.memo(u.forwardRef(function(e,n){var t,r,a,f=(0,u.useRef)(n),p=(0,o.qV)(),d=(0,u.useContext)(l.UM),v=E.getProps(e,d),g=E.setMetaData(w(w({props:v},v.__parentMetadata),{},{context:{disabled:v.disabled}})),m=g.ptm,b=g.cx,h=g.isUnstyled;(0,s.j)(E.css.styles,h,{name:"inputotp"});var y=v.value?null==(r=v.value)||null==(r=r.toString())||null==(a=r.split)?void 0:a.call(r,""):Array(v.length),k=function(e){if(Array.isArray(e))return e}(t=(0,u.useState)(y))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,u,a,l,o=[],i=!0,c=!1;try{a=(t=t.call(e)).next,!1;for(;!(i=(r=a.call(t)).done)&&(o.push(r.value),o.length!==n);i=!0);}catch(e){c=!0,u=e}finally{try{if(!i&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(c)throw u}}return o}}(t,2)||x(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=k[0],C=k[1],_=function(e){var n=e.nextElementSibling;if(n)return"INPUT"===n.nodeName?n:_(n)},D=function(e){var n=e.previousElementSibling;if(n)return"INPUT"===n.nodeName?n:D(n)},P=function(e){var n=_(e.target);n&&(n.focus(),n.select())},N=function(e){var n=D(e.target);n&&(n.focus(),n.select())},R=function(e,n){var t;null==v||null==(t=v.onChange)||t.call(v,{originalEvent:e,value:n.join("")})},I=function(e,n){var t=e.target.value,r=j(S);r[n]=t,C(r=(r=r.join(""))?r.split(""):Array(v.length)),R(e,r)},A=function(e,n){v.disabled||v.readOnly||"insertFromPaste"!==e.nativeEvent.inputType&&(I(e,n),"deleteContentBackward"===e.nativeEvent.inputType?N(e):"insertText"===e.nativeEvent.inputType&&P(e))},T=function(e){if(!v.disabled&&!v.readOnly){var n=e.clipboardData.getData("text");if(n.length){var t=n.substring(0,v.length+1);if(!v.integerOnly||!isNaN(t)){var r=t.split("");C(r),R(e,r)}}}},F=function(e){var n;e.target.select(),null==v||null==(n=v.focus)||n.call(v,e)},M=function(e){var n;null==v||null==(n=v.blur)||n.call(v,e)},U=function(e){if(!v.disabled&&!v.readOnly&&!e.altKey&&!e.ctrlKey&&!e.metaKey)switch(e.code){case"ArrowLeft":N(e),e.preventDefault();break;case"ArrowRight":P(e),e.preventDefault();break;case"Delete":e.preventDefault();var n,t=Number(e.target.id);Number.isNaN(t)||B(S,v.length)||(I(w(w({},e),{},{target:w(w({},e.target),{},{value:""})}),t),P(e));break;case"Backspace":(null==(n=e.target)||null==(n=n.value)?void 0:n.length)===0&&(N(e),e.preventDefault());break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Tab":case"NumpadEnter":case"Enter":break;default:(null!=v&&v.integerOnly&&!("Space"!==e.code&&Number(e.key)>=0&&9>=Number(e.key))||S.join("").length>=v.length&&"Delete"!==e.code)&&e.preventDefault()}},B=function(e,n){return e.length===n&&e.every(function(e){return""===e||null==e})};(0,o.w5)(function(){var e,n;C(v.value?null==(e=v.value)||null==(e=e.toString())||null==(n=e.split)?void 0:n.call(e,""):Array(v.length))},[v.value]);var K=function(e){if(e<=0)return[];var n=v.length-e,t={onInput:function(e){return A(e,n)},onKeyDown:U,onFocus:F,onBlur:M,onPaste:T},r={id:n,value:S[n]||"",inputMode:null!=v&&v.integerOnly?"numeric":"text",type:null!=v&&v.mask?"password":"text",variant:null==v?void 0:v.variant,readOnly:null==v?void 0:v.readOnly,disabled:null==v?void 0:v.disabled,invalid:null==v?void 0:v.invalid,tabIndex:null==v?void 0:v.tabIndex,unstyled:null==v?void 0:v.unstyled,autoFocus:(null==v?void 0:v.autoFocus)&&0===n,"aria-label":(0,l.Y4)("otpLabel",{0:n+1}),className:b("input"),pt:m("input")};return[null!=v&&v.inputTemplate?c.BF.getJSXElement(null==v?void 0:v.inputTemplate,{events:t,props:r}):u.createElement(i.S,O({},r,t,{key:n}))].concat(j(K(e-1)))},V=p({className:b("root"),ref:f,style:null==v?void 0:v.style},m("root"));return u.createElement("div",V,K(v.length))}));_.displayName="InputOtp";var D=t(5695);let P=function(e){let{setStep:n,phone:t}=e,[l,o]=(0,u.useState)(""),i=(0,D.useRouter)(),{mutate:c}=(0,b.n)({mutationKey:["otp"],mutationFn:async()=>(0,h.i6)({phone:m(t),code:l}),onSuccess:e=>{localStorage.setItem("customerToken",e.data.token.access_token),i.push("/")},onError:e=>{console.error("Error during otp:",e)}}),s=async()=>{c()};return(0,r.jsxs)("div",{className:g().otpInput,children:[(0,r.jsx)(_,{value:l,onChange:e=>o(e.value),length:4,style:{gap:10}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.$,{label:"Yenidən g\xf6ndər",link:!0}),(0,r.jsx)(a.$,{label:"Təsdiqlə",onClick:s})]})]})};function N(){let[e,n]=(0,u.useState)("phone"),[t,a]=(0,u.useState)("");return(0,r.jsx)("div",{className:g().login,children:(0,r.jsxs)("div",{className:g().card,children:[(0,r.jsx)("h2",{children:"Daxil ol"}),"phone"==e?(0,r.jsx)(y,{setStep:n,phone:t,setPhone:a}):(0,r.jsx)(P,{setStep:n,phone:t})]})})}},2711:(e,n,t)=>{Promise.resolve().then(t.bind(t,2605))},8363:(e,n,t)=>{"use strict";t.d(n,{sH:()=>p,Tl:()=>s,dJ:()=>i,ps:()=>f,ju:()=>c,U5:()=>l,i6:()=>o});var r=t(3464),u=t(5695);let a=r.A.create({baseURL:"https://dev-api.nargizestetik.az/customer-api"});a.interceptors.request.use(e=>{let n=localStorage.getItem("customerToken");return n&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(n)),e}),a.interceptors.response.use(e=>null==e?void 0:e.data,async e=>{var n,t;return(e.response&&(null==(n=e.response)?void 0:n.data.message)==="USER_NOT_AUTHORIZED"?(localStorage.clear(),(0,u.redirect)("/login")):e.response&&(null==(t=e.response)?void 0:t.data.message)||e.message,e&&e.response)?Promise.reject(e):Promise.reject()});let l=e=>a.post("auth/otp/request",e),o=e=>a.post("auth/otp/verify",e),i=()=>a.get("/reservations"),c=async()=>{let{data:e}=await a.get("/service-types/input-search");return e},s=async e=>{let{data:n}=await a.get("/reservation-times/input-search?date=".concat(e));return n},f=async e=>{let{data:n}=await a.get("/reservations/users/input-search?date_time=".concat(e));return n},p=async e=>a.post("/reservations",e)},9139:e=>{e.exports={login:"login_login__3rAwP",card:"login_card__HHlBu",label:"login_label___4VjD",phoneInput:"login_phoneInput__rVLLX",otpInput:"login_otpInput__PClKn"}}},e=>{var n=n=>e(e.s=n);e.O(0,[280,144,605,441,684,358],()=>n(2711)),_N_E=e.O()}]);